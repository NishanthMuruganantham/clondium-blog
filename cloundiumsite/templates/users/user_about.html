{% extends "layout.html" %}
{% load static %}

{% block content %}
<link href="{% static 'blog/custom/css/custom.css' %}" rel="stylesheet">
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<div class="container">
    <div class="col-md-12">
        <div class="panel profile-cover">
            <div class="profile-cover__img">
                <img src="{{detailed_user.profile_picture.url}}" alt="" />
                <h3 class="h3">{{detailed_user.first_name}} {{detailed_user.last_name}}</h3>
            </div>
            <div class="profile-cover__action bg--img" data-overlay="0.3">
                <button class="btn btn-rounded btn-info">
                    <i class="fa fa-plus"></i>
                    <span>Follow</span>
                </button>
                <button class="btn btn-rounded btn-info">
                    <i class="fa fa-comment"></i>
                    <span>Message</span>
                </button>
            </div>
            <div class="profile-cover__info">
                <ul class="nav">
                    <li><strong>{{detailed_user.posts.count}}</strong>Posts</li>
                    <li><strong>33</strong>Followers</li>
                    <li><strong>136</strong>Following</li>
                </ul>
            </div>
        </div>
        <div class="panel">
            <div class="panel-heading">
                <h3 class="panel-title">Activity Feed</h3>
            </div>
            {% for post in post_list %}
            <div class="card">
                <div class="card-block">
                    <div class="mt-2">
                        <div class="ml-3 mr-1">
                            <h3 class="card-title mb-4"><a href="{% url 'posts:post_detail' pk=post.pk slug=post.slug %}" class="story-title">{{post.title|truncatewords:15}}</a></h3>
                            <small>
                                <span class="meta-footer-thumb">
                                    <a href="{% url 'users:about_user' username=post.author.username %}"><img class="author-thumb" style="width:36px;height: 36px;" src="{{post.author.profile_picture.url}}" alt="Sal"></a>
                                </span>
                                <span class="author-meta">
                                    <span class="post-name"><a href="{% url 'users:about_user' username=post.author.username %}">{{post.author.username}}</a></span><br/>
                                    <span class="post-date text-muted">{{post.created_time}}</span><span class="dot"></span><span class="post-read">{{post.get_readtime}} read</span>
                                </span>
                                <span class="author-meta">
                                    in <a href="{% url 'posts:category_post_list' category_slug=post.category.slug%}">{{post.category.name}}</a>
                                </span>
                            </small>
                            <div class=" mt-3">
                                <p>
                                    {{post.short_description}}
                                </p>
                            </div>
                            <style>
                                ul.tags {
                                    list-style:none;
                                    padding-left:0;
                                    margin:0 0 0 0;
                                }
                                ul.tags li {
                                    display:inline-block;
                                    font-size:0.9rem;
                                }
                                ul.tags li a {
                                    background:rgba(0,0,0,.05);
                                    color:rgba(0,0,0,.6);
                                    border-radius:3px;
                                    padding:5px 10px;
                                }
                                ul.tags li a:hover {
                                    background:rgba(0,0,0,.07);
                                    text-decoration:none;
                                }
                            </style>
                            <div class="mt-2">
                                {% if user in post.likes.all %}
                                {% csrf_token %}
                                    <span id="like_post_button_{{post.pk}}" onclick="like_post(this)" class="post_liked" data-postid="{{post.pk}}" data-likeurl="{% url 'posts:post_like' %}">
                                        <i class="fa fa-37x fa-heart " aria-hidden="true" ></i>
                                    </span>
                                {% else %}
                                    <span id="like_post_button_{{post.pk}}" onclick="like_post(this)" data-postid="{{post.pk}}" data-likeurl="{% url 'posts:post_like' %}">
                                        <i class="fa fa-37x fa-heart-o " aria-hidden="true" ></i>
                                    </span>
                                {% endif %}
                                <span id="like_count_for_{{post.pk}}">{{post.likes.count}}</span>&nbsp;&nbsp;&nbsp;
                                {% if user in post.user_favourite.all %}
                                    {% csrf_token %}
                                    <span id="save_post_button_{{post.pk}}" onclick="save_post(this)" class="post_saved" data-postid="{{post.pk}}" data-url="{% url 'posts:add_to_favourite_posts' %}">
                                        <i class="fa fa-37x fa-bookmark " aria-hidden="true" ></i>
                                    </span>
                                {% else %}
                                    <span id="save_post_button_{{post.pk}}" onclick="save_post(this)" class="" data-postid="{{post.pk}}" data-url="{% url 'posts:add_to_favourite_posts' %}">
                                        <i class="fa fa-37x fa-bookmark-o " aria-hidden="true" ></i>
                                    </span>
                                {% endif %}
                                <span id="save_count_for_{{post.pk}}">{{post.user_favourite.count}}</span>&nbsp;&nbsp;&nbsp;
                                <span  class="post_saved" >
                                    <i class="fa fa-37x fa-comment-o " aria-hidden="true"></i>
                                </span>
                                <span>{{post.comments.count}}</span>&nbsp;&nbsp;&nbsp;
                                <span style="float:right;">
                                    <ul class="tags">
                                        <li><a href="#">Design</a></li>
                                        <li><a href="#">Design</a></li>
                                    </ul>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
        </div>
    </div>
</div>
<script type="text/javascript" src="{% static 'blog/custom/js/comment_like.js' %}"></script>
{% endblock %}